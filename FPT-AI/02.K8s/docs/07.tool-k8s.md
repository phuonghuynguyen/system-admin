<h1 style="color:orange">Sử dụng Kubectl plugins</h1>
Kubectl là commmand line interface để tương tác với K8s cluster.
<h2 style="color:orange">1. Install krew</h2>
Chúng ta có thể cài krew như là kubectl plugin manager để cài kubectl plugin. Krew là tool đơn giản hóa việc sử dụng kubectl plugins. Krew giúp tìm kiếm plugins, cài và quản lý chúng trên máy. Nó tương tự như apt, dnf hoặc brew.

Cài krew:

    $ apt install git -y
    $ (
        set -x; cd "$(mktemp -d)" &&
        OS="$(uname | tr '[:upper:]' '[:lower:]')" &&
        ARCH="$(uname -m | sed -e 's/x86_64/amd64/' -e 's/\(arm\)\(64\)\?.*/\1\2/' -e 's/aarch64$/arm64/')" &&
        KREW="krew-${OS}_${ARCH}" &&
        curl -fsSLO "https://github.com/kubernetes-sigs/krew/releases/latest/download/${KREW}.tar.gz" &&
        tar zxvf "${KREW}.tar.gz" &&
        ./"${KREW}" install krew
      )
EXPORT krew bin path vào biến môi trường

    $ export PATH="${KREW_ROOT:-$HOME/.krew}/bin:$PATH"
<h2 style="color:orange">2. Cài krew plugin ctx và ns</h2>
Update krew local package

    $ kubectl krew update
Install krew plugin ctx và ns

    $ kubectl krew install ctx
    $ kubectl krew install ns
ctx dùng để setting và switching context

Để upgrade các plugin up-to-date
    
    $ kubectl krew upgrade
<h3 style="color:orange">2.1. Sử dụng ctx và ns</h3>
Check context hiện tại

    $ kubectl ctx -c
    $ kubectl ctx
Check namespace hiện tại

    $ kubectl ns -c
    đổi default namespace
    $ kubectl ns
<h2 style="color:orange">3. Cài kube-ps1</h2>
Kube-ps1 là tool display context và namespace hiện tại để tránh gây nhầm lẫn

![tool-k8s](../img/tool-k8s1.png)<br>
Cài kube-ps1: 

    $ gitclone https://github.com/jonmosco/kube-ps1.git
    $ mv ./kube-ps1/kube-ps1.sh /usr/local/bin
    $ vim .bashrc
    thêm các dòng
    source /usr/local/bin/kube-ps1.sh
    PS1='[\u@\h \W $(kube_ps1)]\$ '

    $ bash
<h2 style="color:orange">4. Cài fzf</h2>
Cài fzf hỗ trợ kubectl ns và kubectl ctx
    
    $ git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
    $ ~/.fzf/install